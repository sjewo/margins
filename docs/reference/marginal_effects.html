<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Differentiate a Model Object with Respect to All (or Specified) Variables — marginal_effects • margins</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Differentiate a Model Object with Respect to All (or Specified) Variables — marginal_effects" />

<meta property="og:description" content="Extract marginal effects from a model object, conditional on data, using dydx." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">margins</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.25</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">An Introduction to 'margins'</a>
    </li>
    <li>
      <a href="../articles/Stata.html">Comparison with Stata's 'margins' command</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leeper/margins">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Differentiate a Model Object with Respect to All (or Specified) Variables</h1>
    <small class="dont-index">Source: <a href='https://github.com/leeper/margins/blob/master/R/marginal_effects.R'><code>R/marginal_effects.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/marginal_effects_clm.R'><code>R/marginal_effects_clm.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/marginal_effects_default.R'><code>R/marginal_effects_default.R</code></a>, and 8 more</small>
    <div class="hidden name"><code>marginal_effects.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Extract marginal effects from a model object, conditional on data, using <code><a href='dydx.html'>dydx</a></code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='no'>data</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for margins</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='no'>data</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for clm</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>,
  <span class='fu'>parent.frame</span>()), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for glm</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for loess</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>,
  <span class='fu'>parent.frame</span>()), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for merMod</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lmerMod</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='co'># S3 method for multinom</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>,
  <span class='fu'>parent.frame</span>()), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for nnet</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>,
  <span class='fu'>parent.frame</span>()), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for polr</span>
<span class='fu'>marginal_effects</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>,
  <span class='fu'>parent.frame</span>()), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='kw'>varslist</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.data.frame</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A model object, perhaps returned by <code><a href='http://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></code> or <code><a href='http://www.rdocumentation.org/packages/stats/topics/glm'>glm</a></code></p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A data.frame over which to calculate marginal effects. This is optional, but may be required when the underlying modelling function sets <code>model = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>A character vector with the names of variables for which to compute the marginal effects. The default (<code>NULL</code>) returns marginal effects for all variables.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Arguments passed to methods, and onward to <code><a href='dydx.html'>dydx</a></code> methods and possibly further to <code><a href='http://www.rdocumentation.org/packages/prediction/topics/prediction'>prediction</a></code> methods. This can be useful, for example, for setting <code>type</code> (predicted value type), <code>eps</code> (precision), or <code>category</code> (category for multi-category outcome models), etc.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>A character string indicating the type of marginal effects to estimate. Mostly relevant for non-linear models, where the reasonable options are &#8220;response&#8221; (the default) or &#8220;link&#8221; (i.e., on the scale of the linear predictor in a GLM).</p></td>
    </tr>
    <tr>
      <th>eps</th>
      <td><p>A numeric value specifying the &#8220;step&#8221; to use when calculating numerical derivatives. By default this is the smallest floating point value that can be represented on the present architecture.</p></td>
    </tr>
    <tr>
      <th>varslist</th>
      <td><p>A list structure used internally by <code><a href='margins.html'>margins</a></code>. Users should not set this.</p></td>
    </tr>
    <tr>
      <th>as.data.frame</th>
      <td><p>A logical indicating whether to return a data frame (the default) or a matrix.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An data frame with number of rows equal to <code>nrow(data)</code>, where each row is an observation and each column is the marginal effect of a variable used in the model formula.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Users likely want to use the fully featured <code><a href='margins.html'>margins</a></code> function rather than <code>marginal_effects</code>, which merely performs estimation of the marginal effects but simply returns a data frame. <code><a href='margins.html'>margins</a></code>, by contrast, does some convenient packaging around these results and supports additional functionality, like variance estimation and counterfactual estimation procedures. The methods for this function provide lower-level functionality that extracts unit-specific marginal effects from an estimated model with respect to <em>all</em> variables specified in <code>data</code> (or the subset specified in <code>variables</code>) and returns a data frame. See <code><a href='dydx.html'>dydx</a></code> for computational details. Note that for factor and logical class variables, discrete changes in the outcome are reported rather than instantaneous marginal effects.</p>
<p>Methods are currently implemented for the following object classes:</p><ul>
<li><p>&#8220;betareg&#8221;, see <code><a href='http://www.rdocumentation.org/packages/betareg/topics/betareg'>betareg</a></code></p></li>
<li><p>&#8220;glm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/glm'>glm</a></code>, <code><a href='http://www.rdocumentation.org/packages/MASS/topics/glm.nb'>glm.nb</a></code></p></li>
<li><p>&#8220;ivreg&#8221;, see <code><a href='http://www.rdocumentation.org/packages/AER/topics/ivreg'>ivreg</a></code></p></li>
<li><p>&#8220;lm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></code></p></li>
<li><p>&#8220;loess&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/loess'>loess</a></code></p></li>
<li><p>&#8220;merMod&#8221;, see <code><a href='http://www.rdocumentation.org/packages/lme4/topics/lmer'>lmer</a></code>, <code><a href='http://www.rdocumentation.org/packages/lme4/topics/glmer'>glmer</a></code></p></li>
<li><p>&#8220;multinom&#8221;, see <code><a href='http://www.rdocumentation.org/packages/nnet/topics/multinom'>multinom</a></code></p></li>
<li><p>&#8220;nnet&#8221;, see <code><a href='http://www.rdocumentation.org/packages/nnet/topics/nnet'>nnet</a></code></p></li>
<li><p>&#8220;polr&#8221;, see <code><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></code></p></li>
<li><p>&#8220;svyglm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/survey/topics/svyglm'>svyglm</a></code></p></li>
</ul>
    <p>A method is also provided for the object classes &#8220;margins&#8221; to return a simplified data frame from complete &#8220;margins&#8221; objects.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='dydx.html'>dydx</a></code>, <code><a href='margins.html'>margins</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>require</span>(<span class='st'>"datasets"</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>cyl</span> * <span class='no'>hp</span> + <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)
<span class='fu'>marginal_effects</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt;      dydx_cyl     dydx_hp   dydx_wt
#&gt; 1  -0.6572244 -0.04987248 -3.119815
#&gt; 2  -0.6572244 -0.04987248 -3.119815
#&gt; 3  -0.9794364 -0.08777977 -3.119815
#&gt; 4  -0.6572244 -0.04987248 -3.119815
#&gt; 5   0.5747624 -0.01196519 -3.119815
#&gt; 6  -0.7519926 -0.04987248 -3.119815
#&gt; 7   1.9015174 -0.01196519 -3.119815
#&gt; 8  -1.5669993 -0.08777977 -3.119815
#&gt; 9  -0.9415291 -0.08777977 -3.119815
#&gt; 10 -0.4108271 -0.04987248 -3.119815
#&gt; 11 -0.4108271 -0.04987248 -3.119815
#&gt; 12  0.6695306 -0.01196519 -3.119815
#&gt; 13  0.6695306 -0.01196519 -3.119815
#&gt; 14  0.6695306 -0.01196519 -3.119815
#&gt; 15  1.1433716 -0.01196519 -3.119815
#&gt; 16  1.3329081 -0.01196519 -3.119815
#&gt; 17  1.6172127 -0.01196519 -3.119815
#&gt; 18 -1.4911847 -0.08777977 -3.119815
#&gt; 19 -1.7565357 -0.08777977 -3.119815
#&gt; 20 -1.5101384 -0.08777977 -3.119815
#&gt; 21 -0.9036218 -0.08777977 -3.119815
#&gt; 22  0.1009213 -0.01196519 -3.119815
#&gt; 23  0.1009213 -0.01196519 -3.119815
#&gt; 24  1.9015174 -0.01196519 -3.119815
#&gt; 25  0.5747624 -0.01196519 -3.119815
#&gt; 26 -1.4911847 -0.08777977 -3.119815
#&gt; 27 -1.0173436 -0.08777977 -3.119815
#&gt; 28 -0.6003635 -0.08777977 -3.119815
#&gt; 29  2.2616366 -0.01196519 -3.119815
#&gt; 30  0.5747624 -0.04987248 -3.119815
#&gt; 31  3.6073452 -0.01196519 -3.119815
#&gt; 32 -0.6761781 -0.08777977 -3.119815</div><div class='input'>
<span class='co'># factor variables report discrete differences</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='fu'>factor</span>(<span class='no'>cyl</span>) * <span class='fu'>factor</span>(<span class='no'>am</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)
<span class='fu'>marginal_effects</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt;    dydx_cyl6 dydx_cyl8 dydx_am1
#&gt; 1  -7.508333   -12.675 1.441667
#&gt; 2  -7.508333   -12.675 1.441667
#&gt; 3  -7.508333   -12.675 5.175000
#&gt; 4  -3.775000    -7.850 1.441667
#&gt; 5  -3.775000    -7.850 0.350000
#&gt; 6  -3.775000    -7.850 1.441667
#&gt; 7  -3.775000    -7.850 0.350000
#&gt; 8  -3.775000    -7.850 5.175000
#&gt; 9  -3.775000    -7.850 5.175000
#&gt; 10 -3.775000    -7.850 1.441667
#&gt; 11 -3.775000    -7.850 1.441667
#&gt; 12 -3.775000    -7.850 0.350000
#&gt; 13 -3.775000    -7.850 0.350000
#&gt; 14 -3.775000    -7.850 0.350000
#&gt; 15 -3.775000    -7.850 0.350000
#&gt; 16 -3.775000    -7.850 0.350000
#&gt; 17 -3.775000    -7.850 0.350000
#&gt; 18 -7.508333   -12.675 5.175000
#&gt; 19 -7.508333   -12.675 5.175000
#&gt; 20 -7.508333   -12.675 5.175000
#&gt; 21 -3.775000    -7.850 5.175000
#&gt; 22 -3.775000    -7.850 0.350000
#&gt; 23 -3.775000    -7.850 0.350000
#&gt; 24 -3.775000    -7.850 0.350000
#&gt; 25 -3.775000    -7.850 0.350000
#&gt; 26 -7.508333   -12.675 5.175000
#&gt; 27 -7.508333   -12.675 5.175000
#&gt; 28 -7.508333   -12.675 5.175000
#&gt; 29 -7.508333   -12.675 0.350000
#&gt; 30 -7.508333   -12.675 1.441667
#&gt; 31 -7.508333   -12.675 0.350000
#&gt; 32 -7.508333   -12.675 5.175000</div><div class='input'>
<span class='co'># get just marginal effects from "margins" object</span>
<span class='fu'>require</span>(<span class='st'>'datasets'</span>)
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='margins.html'>margins</a></span>(<span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>[<span class='fl'>1</span>:<span class='fl'>10</span>,]))
<span class='fu'>marginal_effects</span>(<span class='no'>m</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ hp, data = mtcars[1:10, ])</span></div><div class='output co'>#&gt;       hp
#&gt;  -0.0505</div><div class='input'><span class='fu'>marginal_effects</span>(<span class='no'>m</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ hp, data = mtcars[1:10, ])</span></div><div class='output co'>#&gt;       hp
#&gt;  -0.0505</div><div class='input'>
<span class='co'># multi-category outcome</span>
<span class='kw'>if</span> (<span class='fu'>requireNamespace</span>(<span class='st'>"nnet"</span>)) {
  <span class='fu'>data</span>(<span class='st'>"iris3"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"datasets"</span>)
  <span class='no'>ird</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='fu'>rbind</span>(<span class='no'>iris3</span>[,,<span class='fl'>1</span>], <span class='no'>iris3</span>[,,<span class='fl'>2</span>], <span class='no'>iris3</span>[,,<span class='fl'>3</span>]),
                    <span class='kw'>species</span> <span class='kw'>=</span> <span class='fu'>factor</span>(<span class='fu'>c</span>(<span class='fu'>rep</span>(<span class='st'>"s"</span>,<span class='fl'>50</span>), <span class='fu'>rep</span>(<span class='st'>"c"</span>, <span class='fl'>50</span>), <span class='fu'>rep</span>(<span class='st'>"v"</span>, <span class='fl'>50</span>))))
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>nnet</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/nnet/topics/nnet'>nnet</a></span>(<span class='no'>species</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ird</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>rang</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
                  <span class='kw'>decay</span> <span class='kw'>=</span> <span class='fl'>5e-4</span>, <span class='kw'>maxit</span> <span class='kw'>=</span> <span class='fl'>200</span>, <span class='kw'>trace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='fu'>marginal_effects</span>(<span class='no'>m</span>) <span class='co'># default</span>
  <span class='fu'>marginal_effects</span>(<span class='no'>m</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>"v"</span>) <span class='co'># explicit category</span>
}</div><div class='output co'>#&gt; <span class='message'>Loading required namespace: nnet</span></div><div class='output co'>#&gt;     dydx_Sepal.L. dydx_Sepal.W. dydx_Petal.L. dydx_Petal.W.
#&gt; 1   -7.051271e-07 -2.052312e-06  3.514936e-06  1.675324e-06
#&gt; 2   -2.151130e-06 -6.261015e-06  1.072339e-05  5.109200e-06
#&gt; 3   -1.177273e-06 -3.426522e-06  5.868559e-06  2.796840e-06
#&gt; 4   -3.090140e-06 -8.994083e-06  1.540458e-05  7.338492e-06
#&gt; 5   -6.224677e-07 -1.811726e-06  3.102878e-06  1.479004e-06
#&gt; 6   -9.843186e-07 -2.864892e-06  4.906381e-06  2.339968e-06
#&gt; 7   -1.397017e-06 -4.066084e-06  6.963751e-06  3.319857e-06
#&gt; 8   -1.271772e-06 -3.701575e-06  6.339730e-06  3.020847e-06
#&gt; 9   -3.808188e-06 -1.108402e-05  1.898409e-05  9.043857e-06
#&gt; 10  -2.106436e-06 -6.130955e-06  1.050094e-05  5.001401e-06
#&gt; 11  -5.492563e-07 -1.598641e-06  2.737944e-06  1.305000e-06
#&gt; 12  -2.052301e-06 -5.973374e-06  1.023083e-05  4.873978e-06
#&gt; 13  -1.954305e-06 -5.688160e-06  9.742478e-06  4.640471e-06
#&gt; 14  -9.948020e-07 -2.895437e-06  4.959052e-06  2.362935e-06
#&gt; 15  -9.403195e-08 -2.736807e-07  4.686752e-07  2.236826e-07
#&gt; 16  -1.668465e-07 -4.856028e-07  8.315335e-07  3.971989e-07
#&gt; 17  -2.702323e-07 -7.865056e-07  1.346799e-06  6.432828e-07
#&gt; 18  -8.240693e-07 -2.398486e-06  4.107675e-06  1.958711e-06
#&gt; 19  -8.362528e-07 -2.433956e-06  4.168526e-06  1.987103e-06
#&gt; 20  -6.447290e-07 -1.876509e-06  3.213725e-06  1.532467e-06
#&gt; 21  -1.912312e-06 -5.565928e-06  9.533023e-06  4.541303e-06
#&gt; 22  -9.122039e-07 -2.654990e-06  4.546800e-06  2.169108e-06
#&gt; 23  -2.235473e-07 -6.506385e-07  1.114237e-06  5.316339e-07
#&gt; 24  -4.944118e-06 -1.439005e-05  2.464453e-05  1.175222e-05
#&gt; 25  -6.227421e-06 -1.812545e-05  3.104518e-05  1.478457e-05
#&gt; 26  -4.123226e-06 -1.200098e-05  2.055484e-05  9.790796e-06
#&gt; 27  -2.491063e-06 -7.250352e-06  1.241719e-05  5.920211e-06
#&gt; 28  -9.164195e-07 -2.667296e-06  4.568269e-06  2.176984e-06
#&gt; 29  -7.992454e-07 -2.326250e-06  3.984119e-06  1.898853e-06
#&gt; 30  -3.342657e-06 -9.729062e-06  1.666351e-05  7.937629e-06
#&gt; 31  -3.850823e-06 -1.120812e-05  1.919684e-05  9.144097e-06
#&gt; 32  -1.337868e-06 -3.893906e-06  6.668626e-06  3.180636e-06
#&gt; 33  -2.538395e-07 -7.388152e-07  1.265359e-06  6.030371e-07
#&gt; 34  -1.477495e-07 -4.300291e-07  7.364530e-07  3.512868e-07
#&gt; 35  -2.490459e-06 -7.248663e-06  1.241507e-05  5.914606e-06
#&gt; 36  -6.942313e-07 -2.020594e-06  3.460564e-06  1.649712e-06
#&gt; 37  -3.939564e-07 -1.146627e-06  1.963742e-06  9.362959e-07
#&gt; 38  -5.692382e-07 -1.656806e-06  2.837639e-06  1.352058e-06
#&gt; 39  -2.153387e-06 -6.267576e-06  1.073456e-05  5.114918e-06
#&gt; 40  -1.189086e-06 -3.460914e-06  5.927537e-06  2.824494e-06
#&gt; 41  -6.348122e-07 -1.847640e-06  3.164226e-06  1.509214e-06
#&gt; 42  -1.170198e-05 -3.405942e-05  5.833446e-05  2.779557e-05
#&gt; 43  -1.441398e-06 -4.195279e-06  7.185237e-06  3.424127e-06
#&gt; 44  -2.842473e-06 -8.273009e-06  1.416714e-05  6.763525e-06
#&gt; 45  -2.940437e-06 -8.558310e-06  1.465764e-05  6.986092e-06
#&gt; 46  -2.732932e-06 -7.954356e-06  1.362327e-05  6.493020e-06
#&gt; 47  -7.647180e-07 -2.225759e-06  3.812052e-06  1.816598e-06
#&gt; 48  -1.768016e-06 -5.145929e-06  8.813511e-06  4.199491e-06
#&gt; 49  -5.860945e-07 -1.705861e-06  2.921582e-06  1.392495e-06
#&gt; 50  -1.106556e-06 -3.220700e-06  5.516077e-06  2.628692e-06
#&gt; 51  -3.308270e-04 -9.328372e-04  1.268526e-03  2.578749e-03
#&gt; 52  -6.772191e-04 -1.909681e-03  2.598219e-03  5.271903e-03
#&gt; 53  -4.837141e-03 -1.364451e-02  1.861278e-02  3.739975e-02
#&gt; 54  -6.509447e-04 -1.835797e-03  2.500036e-03  5.055018e-03
#&gt; 55  -5.670180e-03 -1.599418e-02  2.181636e-02  4.384958e-02
#&gt; 56  -9.822168e-04 -2.770426e-03  3.777054e-03  7.605369e-03
#&gt; 57  -5.170755e-03 -1.458489e-02  1.988804e-02  4.001904e-02
#&gt; 58  -3.220893e-06 -7.969617e-06 -1.736563e-06  9.145689e-05
#&gt; 59  -3.655220e-04 -1.030815e-03  1.403428e-03  2.840400e-03
#&gt; 60  -3.834587e-04 -1.080993e-03  1.467167e-03  3.003948e-03
#&gt; 61  -4.036631e-05 -1.134874e-04  1.505509e-04  3.345659e-04
#&gt; 62  -6.045658e-04 -1.704574e-03  2.316521e-03  4.720239e-03
#&gt; 63  -5.451886e-05 -1.535600e-04  2.069272e-04  4.349442e-04
#&gt; 64  -3.581290e-03 -1.010205e-02  1.378073e-02  2.768809e-02
#&gt; 65  -2.159420e-05 -5.959600e-05  6.642147e-05  2.454700e-04
#&gt; 66  -1.815702e-04 -5.116778e-04  6.924382e-04  1.433088e-03
#&gt; 67  -5.205039e-03 -1.468195e-02  2.002441e-02  4.026319e-02
#&gt; 68  -2.883766e-05 -8.103599e-05  1.070559e-04  2.413568e-04
#&gt; 69  -1.368537e-01 -3.860565e-01  5.268793e-01  1.056814e+00
#&gt; 70  -5.121478e-05 -1.441034e-04  1.924830e-04  4.175505e-04
#&gt; 71  -5.785503e-01 -1.632036e+00  2.227167e+00  4.467869e+00
#&gt; 72  -8.154203e-05 -2.294451e-04  3.065870e-04  6.642272e-04
#&gt; 73  -4.004084e-01 -1.129536e+00  1.541658e+00  3.091197e+00
#&gt; 74  -5.829030e-04 -1.644143e-03  2.241718e-03  4.512465e-03
#&gt; 75  -1.372603e-04 -3.867941e-04  5.232665e-04  1.084256e-03
#&gt; 76  -2.688252e-04 -7.578365e-04  1.028589e-03  2.105792e-03
#&gt; 77  -3.391752e-03 -9.567441e-03  1.305180e-02  2.622076e-02
#&gt; 78  -4.677926e-01 -1.319612e+00  1.800950e+00  3.612012e+00
#&gt; 79  -4.252792e-03 -1.199579e-02  1.635925e-02  3.290525e-02
#&gt; 80   3.816546e-06  1.214760e-05 -3.218662e-05  5.292630e-05
#&gt; 81  -5.093067e-05 -1.432755e-04  1.910547e-04  4.169323e-04
#&gt; 82  -2.005929e-05 -5.608837e-05  7.092490e-05  1.845717e-04
#&gt; 83  -5.054036e-05 -1.420422e-04  1.878771e-04  4.218079e-04
#&gt; 84  -2.902382e-01 -8.187566e-01  1.117553e+00  2.240436e+00
#&gt; 85  -7.417869e-03 -2.092409e-02  2.854210e-02  5.735885e-02
#&gt; 86  -1.556468e-03 -4.389470e-03  5.976695e-03  1.209248e-02
#&gt; 87  -1.925287e-03 -5.430371e-03  7.402756e-03  1.491167e-02
#&gt; 88  -1.803992e-03 -5.088553e-03  6.940172e-03  1.395433e-02
#&gt; 89  -1.086502e-04 -3.059936e-04  4.119407e-04  8.688880e-04
#&gt; 90  -3.336326e-04 -9.406950e-04  1.278610e-03  2.603794e-03
#&gt; 91  -5.896383e-04 -1.663092e-03  2.267004e-03  4.567511e-03
#&gt; 92  -1.284914e-03 -3.624165e-03  4.940486e-03  9.951931e-03
#&gt; 93  -8.921303e-05 -2.512698e-04  3.384666e-04  7.124064e-04
#&gt; 94  -6.027464e-06 -1.600382e-05  1.055078e-05  1.061463e-04
#&gt; 95  -3.757469e-04 -1.059556e-03  1.441494e-03  2.925476e-03
#&gt; 96  -7.176199e-05 -2.020605e-04  2.715224e-04  5.765191e-04
#&gt; 97  -1.857794e-04 -5.236525e-04  7.099202e-04  1.459576e-03
#&gt; 98  -1.660438e-04 -4.680036e-04  6.342455e-04  1.305740e-03
#&gt; 99   2.920859e-05  8.613326e-05 -1.597838e-04 -2.591674e-06
#&gt; 100 -1.678648e-04 -4.730807e-04  6.404995e-04  1.323365e-03
#&gt; 101 -2.654112e-06 -7.487187e-06  1.021943e-05  2.048771e-05
#&gt; 102 -1.310598e-03 -3.697186e-03  5.046558e-03  1.011684e-02
#&gt; 103 -3.838546e-05 -1.082849e-04  1.478051e-04  2.962896e-04
#&gt; 104 -1.111922e-03 -3.136731e-03  4.281638e-03  8.582727e-03
#&gt; 105 -1.503573e-05 -4.241555e-05  5.789518e-05  1.160592e-04
#&gt; 106 -5.907586e-06 -1.666524e-05  2.274763e-05  4.559757e-05
#&gt; 107 -2.283101e-01 -6.440560e-01  8.790641e-01  1.762618e+00
#&gt; 108 -8.471160e-05 -2.389710e-04  3.261938e-04  6.538452e-04
#&gt; 109 -1.086850e-04 -3.065999e-04  4.185060e-04  8.388925e-04
#&gt; 110 -6.478197e-06 -1.827482e-05  2.494354e-05  5.000787e-05
#&gt; 111 -2.164049e-02 -6.104735e-02  8.332414e-02  1.670762e-01
#&gt; 112 -9.602287e-04 -2.708799e-03  3.697457e-03  7.412093e-03
#&gt; 113 -1.743856e-04 -4.919392e-04  6.714732e-04  1.346120e-03
#&gt; 114 -2.281324e-04 -6.435581e-04  8.784256e-04  1.761014e-03
#&gt; 115 -1.366213e-05 -3.854036e-05  5.260243e-05  1.054739e-04
#&gt; 116 -7.842880e-05 -2.212452e-04  3.019751e-04  6.054726e-04
#&gt; 117 -6.237476e-03 -1.759592e-02  2.401846e-02  4.814750e-02
#&gt; 118 -1.492471e-05 -4.210243e-05  5.746856e-05  1.151982e-04
#&gt; 119 -6.607927e-07 -1.864090e-06  2.544454e-06  5.100176e-06
#&gt; 120 -1.758884e-01 -4.961804e-01  6.772784e-01  1.357688e+00
#&gt; 121 -2.540746e-05 -7.167388e-05  9.782958e-05  1.961284e-04
#&gt; 122 -1.523471e-03 -4.297688e-03  5.866069e-03  1.176092e-02
#&gt; 123 -5.597061e-06 -1.578926e-05  2.155201e-05  4.320040e-05
#&gt; 124 -1.088174e-01 -3.069719e-01  4.189939e-01  8.400831e-01
#&gt; 125 -1.686582e-04 -4.757827e-04  6.494236e-04  1.301891e-03
#&gt; 126 -1.633639e-03 -4.608498e-03  6.290638e-03  1.260966e-02
#&gt; 127 -3.414447e-01 -9.631992e-01  1.314599e+00  2.636225e+00
#&gt; 128 -3.874637e-01 -1.093016e+00  1.491769e+00  2.991506e+00
#&gt; 129 -3.426615e-05 -9.666432e-05  1.319427e-04  2.644967e-04
#&gt; 130 -7.313048e-02 -2.063014e-01  2.816048e-01  5.644852e-01
#&gt; 131 -6.781546e-05 -1.913070e-04  2.611313e-04  5.234379e-04
#&gt; 132 -4.790724e-04 -1.351461e-03  1.844734e-03  3.697861e-03
#&gt; 133 -1.648056e-05 -4.649136e-05  6.345819e-05  1.272133e-04
#&gt; 134 -3.571999e-01 -1.007648e+00  1.375315e+00  2.757588e+00
#&gt; 135 -8.888042e-02 -2.507323e-01  3.422558e-01  6.860416e-01
#&gt; 136 -8.383570e-06 -2.364991e-05  3.228094e-05  6.471176e-05
#&gt; 137 -1.720157e-05 -4.852511e-05  6.623179e-05  1.327913e-04
#&gt; 138 -9.259390e-03 -2.612075e-02  3.565482e-02  7.147442e-02
#&gt; 139 -5.446042e-01 -1.536289e+00  2.096638e+00  4.205074e+00
#&gt; 140 -5.693511e-04 -1.606130e-03  2.192276e-03  4.395136e-03
#&gt; 141 -1.178656e-05 -3.324955e-05  4.538246e-05  9.098726e-05
#&gt; 142 -3.043450e-04 -8.585449e-04  1.171781e-03  2.349814e-03
#&gt; 143 -1.310598e-03 -3.697186e-03  5.046558e-03  1.011684e-02
#&gt; 144 -1.177644e-05 -3.322111e-05  4.534485e-05  9.090278e-05
#&gt; 145 -7.455583e-06 -2.103195e-05  2.870623e-05  5.755569e-05
#&gt; 146 -9.105744e-05 -2.568700e-04  3.505966e-04  7.029808e-04
#&gt; 147 -2.428161e-03 -6.849821e-03  9.349784e-03  1.874402e-02
#&gt; 148 -2.783418e-03 -7.851988e-03  1.071757e-02  2.148720e-02
#&gt; 149 -7.646882e-05 -2.157163e-04  2.944303e-04  5.903333e-04
#&gt; 150 -5.193763e-02 -1.465156e-01  1.999884e-01  4.009439e-01</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thomas J. Leeper.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

