<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Marginal Effects Estimation — margins • margins</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Marginal Effects Estimation — margins" />

<meta property="og:description" content="This package is an R port of Stata's margins command, implemented as an S3 generic margins() for model objects, like those of class &amp;#8220;lm&amp;#8221; and &amp;#8220;glm&amp;#8221;. margins() is an S3 generic function for building a &amp;#8220;margins&amp;#8221; object from a model object. Methods are currently implemented for several model classes (see Details, below).
The package also provides a low-level function, marginal_effects, to estimate those quantities and return a data frame of unit-specific effects and another even lower-level function, dydx, to provide variable-specific derivatives from models. Some of the underlying architecture for the package is provided by the low-level function prediction, which provides a consistent data frame interface to predict for a large number of model types. If a prediction method exists for a model class, margin should work for the model class but only those classes listed here have been tested and specifically supported." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">margins</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.25</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">An Introduction to 'margins'</a>
    </li>
    <li>
      <a href="../articles/Stata.html">Comparison with Stata's 'margins' command</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leeper/margins">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Marginal Effects Estimation</h1>
    <small class="dont-index">Source: <a href='https://github.com/leeper/margins/blob/master/R/margins.R'><code>R/margins.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/margins_betareg.R'><code>R/margins_betareg.R</code></a>, <a href='https://github.com/leeper/margins/blob/master/R/margins_clm.R'><code>R/margins_clm.R</code></a>, and 11 more</small>
    <div class="hidden name"><code>margins.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This package is an R port of Stata's <samp>margins</samp> command, implemented as an S3 generic <code>margins()</code> for model objects, like those of class &#8220;lm&#8221; and &#8220;glm&#8221;. <code>margins()</code> is an S3 generic function for building a &#8220;margins&#8221; object from a model object. Methods are currently implemented for several model classes (see Details, below).</p>
<p>The package also provides a low-level function, <code><a href='marginal_effects.html'>marginal_effects</a></code>, to estimate those quantities and return a data frame of unit-specific effects and another even lower-level function, <code><a href='dydx.html'>dydx</a></code>, to provide variable-specific derivatives from models. Some of the underlying architecture for the package is provided by the low-level function <code><a href='http://www.rdocumentation.org/packages/prediction/topics/prediction'>prediction</a></code>, which provides a consistent data frame interface to <code><a href='http://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></code> for a large number of model types. If a <code>prediction</code> method exists for a model class, <code>margin</code> should work for the model class but only those classes listed here have been tested and specifically supported.</p>
    
    </div>

    <pre class="usage"><span class='fu'>margins</span>(<span class='no'>model</span>, <span class='no'>...</span>)

<span class='co'># S3 method for betareg</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>, <span class='kw'>phi</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>), <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>,
  <span class='st'>"bootstrap"</span>, <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
  <span class='no'>...</span>)

<span class='co'># S3 method for clm</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='st'>"none"</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>), <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>,
  <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for glm</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>), <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>,
  <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>), <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>,
  <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for loess</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='no'>data</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='st'>"none"</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for merMod</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>),
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>, <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>,
  <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lmerMod</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>), <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>), <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>),
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>, <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>,
  <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for multinom</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>),
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>, <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>,
  <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for nnet</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>vce</span> <span class='kw'>=</span> <span class='st'>"none"</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='co'># S3 method for polr</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>),
  <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>, <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>,
  <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)

<span class='fu'>margins_summary</span>(<span class='no'>model</span>, <span class='no'>...</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>by_factor</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># S3 method for svyglm</span>
<span class='fu'>margins</span>(<span class='no'>model</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/prediction/topics/find_data'>find_data</a></span>(<span class='no'>model</span>, <span class='fu'>parent.frame</span>()),
  <span class='no'>design</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"link"</span>),
  <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/vcov'>vcov</a></span>(<span class='no'>model</span>), <span class='kw'>vce</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"delta"</span>, <span class='st'>"simulation"</span>, <span class='st'>"bootstrap"</span>,
  <span class='st'>"none"</span>), <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50L</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>eps</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A model object. See Details for supported model classes.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Arguments passed to methods, and onward to <code><a href='dydx.html'>dydx</a></code> methods and possibly further to <code><a href='http://www.rdocumentation.org/packages/prediction/topics/prediction'>prediction</a></code> methods. This can be useful, for example, for setting <code>type</code> (predicted value type), <code>eps</code> (precision), or <code>category</code> (category for multi-category outcome models), etc.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A data frame containing the data at which to evaluate the marginal effects, as in <code><a href='http://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></code>. This is optional, but may be required when the underlying modelling function sets <code>model = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>A character vector with the names of variables for which to compute the marginal effects. The default (<code>NULL</code>) returns marginal effects for all variables.</p></td>
    </tr>
    <tr>
      <th>at</th>
      <td><p>A list of one or more named vectors, specifically values at which to calculate the marginal effects. This is an analogue of Stata's <code>, at()</code> option. The specified values are fully combined (i.e., a cartesian product) to find AMEs for all combinations of specified variable values. Rather than a list, this can also be a data frame of combination levels if only a subset of combinations are desired. These are used to modify the value of <code>data</code> when calculating AMEs across specified values (see <code><a href='http://www.rdocumentation.org/packages/prediction/topics/build_datalist'>build_datalist</a></code> for details on use). Note: This does not calculate AMEs for <em>subgroups</em> but rather for counterfactual datasets where all observaations take the specified values; to obtain subgroup effects, subset <code>data</code> directly.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>A character string indicating the type of marginal effects to estimate. Mostly relevant for non-linear models, where the reasonable options are &#8220;response&#8221; (the default) or &#8220;link&#8221; (i.e., on the scale of the linear predictor in a GLM).</p></td>
    </tr>
    <tr>
      <th>vcov</th>
      <td><p>A matrix containing the variance-covariance matrix for estimated model coefficients, or a function to perform the estimation with <code>model</code> as its only argument.</p></td>
    </tr>
    <tr>
      <th>vce</th>
      <td><p>A character string indicating the type of estimation procedure to use for estimating variances. The default (&#8220;delta&#8221;) uses the delta method. Alternatives are &#8220;bootstrap&#8221;, which uses bootstrap estimation, or &#8220;simulation&#8221;, which averages across simulations drawn from the joint sampling distribution of model coefficients. The latter two are extremely time intensive.</p></td>
    </tr>
    <tr>
      <th>iterations</th>
      <td><p>If <code>vce = "bootstrap"</code>, the number of bootstrap iterations. If <code>vce = "simulation"</code>, the number of simulated effects to draw. Ignored otherwise.</p></td>
    </tr>
    <tr>
      <th>unit_ses</th>
      <td><p>If <code>vce = "delta"</code>, a logical specifying whether to calculate and return unit-specific marginal effect variances. This calculation is time consuming and the information is often not needed, so this is set to <code>FALSE</code> by default.</p></td>
    </tr>
    <tr>
      <th>eps</th>
      <td><p>A numeric value specifying the &#8220;step&#8221; to use when calculating numerical derivatives.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>A numeric value specifying the confidence level for calculating p-values and confidence intervals.</p></td>
    </tr>
    <tr>
      <th>by_factor</th>
      <td><p>A logical specifying whether to order the output by factor (the default, <code>TRUE</code>).</p></td>
    </tr>
    <tr>
      <th>design</th>
      <td><p>Only for models estimated using <code><a href='http://www.rdocumentation.org/packages/survey/topics/svyglm'>svyglm</a></code>, the &#8220;survey.design&#8221; object used to estimate the model. This is required.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame of class &#8220;margins&#8221; containing the contents of <code>data</code>, predicted values from <code>model</code> for <code>data</code>, the standard errors of the predictions, and any estimated marginal effects. If <code>at = NULL</code> (the default), then the data frame will have a number of rows equal to <code>nrow(data)</code>. Otherwise, the number of rows will be a multiple thereof based upon the number of combinations of values specified in <code>at</code>. Columns containing marginal effects are distinguished by their name (prefixed by <code>dydx_</code>). These columns can be extracted from a &#8220;margins&#8221; object using, for example, <code><a href='marginal_effects.html'>marginal_effects(margins(model))</a></code>. Columns prefixed by <code>Var_</code> specify the variances of the <em>average</em> marginal effects, whereas (optional) columns prefixed by <code>SE_</code> contain observation-specific standard errors. A special column, <code>_at_number</code>, specifies which <code>at</code> combination a given row corresponds to; the data frame carries an attribute &#8220;at&#8221; that specifies which combination of values this index represents. The <code>summary.margins()</code> method provides for pretty printing of the results, particularly in cases where <code>at</code> is specified. A variance-covariance matrix for the average marginal effects is returned as an attribute (though behavior when <code>at</code> is non-NULL is unspecified).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Methods for this generic return a &#8220;margins&#8221; object, which is a data frame consisting of the original data, predicted values and standard errors thereof, estimated marginal effects from the model <code>model</code> (for all variables used in the model, or the subset specified by <code>variables</code>), along with attributes describing various features of the marginal effects estimates.</p>
<p>The default print method is concise; a more useful <code>summary</code> method provides additional details.</p>
<p><code>margins_summary</code> is sugar that provides a more convenient way of obtaining the nested call: <code>summary(margins(...))</code>.</p>
<p>Methods are currently implemented for the following object classes:</p><ul>
<li><p>&#8220;betareg&#8221;, see <code><a href='http://www.rdocumentation.org/packages/betareg/topics/betareg'>betareg</a></code></p></li>
<li><p>&#8220;glm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/glm'>glm</a></code>, <code><a href='http://www.rdocumentation.org/packages/MASS/topics/glm.nb'>glm.nb</a></code></p></li>
<li><p>&#8220;ivreg&#8221;, see <code><a href='http://www.rdocumentation.org/packages/AER/topics/ivreg'>ivreg</a></code></p></li>
<li><p>&#8220;lm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></code></p></li>
<li><p>&#8220;loess&#8221;, see <code><a href='http://www.rdocumentation.org/packages/stats/topics/loess'>loess</a></code></p></li>
<li><p>&#8220;merMod&#8221;, see <code><a href='http://www.rdocumentation.org/packages/lme4/topics/lmer'>lmer</a></code>, <code><a href='http://www.rdocumentation.org/packages/lme4/topics/glmer'>glmer</a></code></p></li>
<li><p>&#8220;nnet&#8221;, see <code><a href='http://www.rdocumentation.org/packages/nnet/topics/nnet'>nnet</a></code></p></li>
<li><p>&#8220;polr&#8221;, see <code><a href='http://www.rdocumentation.org/packages/MASS/topics/polr'>polr</a></code></p></li>
<li><p>&#8220;svyglm&#8221;, see <code><a href='http://www.rdocumentation.org/packages/survey/topics/svyglm'>svyglm</a></code></p></li>
</ul>
    <p>The <code>margins</code> methods simply construct a list of data frames based upon the values of <code>at</code> (using <code><a href='http://www.rdocumentation.org/packages/prediction/topics/build_datalist'>build_datalist</a></code>), calculate marginal effects for each data frame (via <code><a href='marginal_effects.html'>marginal_effects</a></code> and, in turn, <code><a href='dydx.html'>dydx</a></code> and <code><a href='http://www.rdocumentation.org/packages/prediction/topics/prediction'>prediction</a></code>), stacks the results together, and provides variance estimates. Alternatively, you can use <code><a href='marginal_effects.html'>marginal_effects</a></code> directly to only retrieve a data frame of marginal effects without constructing a &#8220;margins&#8221; object or variance estimates. That can be efficient for plotting, etc., given the time-consuming nature of variance estimation.</p>
<p>See <code><a href='dydx.html'>dydx</a></code> for details on estimation of marginal effects.</p>
<p>The choice of <code>vce</code> may be important. The default variance-covariance estimation procedure (<code>vce = "delta"</code>) uses the delta method to estimate marginal effect variances. This is the fastest method. When <code>vce = "simulation"</code>, coefficient estimates are repeatedly drawn from the asymptotic (multivariate normal) distribution of the model coefficients and each draw is used to estimate marginal effects, with the variance based upon the dispersion of those simulated effects. The number of iterations used is given by <code>iterations</code>. For <code>vce = "bootstrap"</code>, the bootstrap is used to repeatedly subsample <code>data</code> and the variance of marginal effects is estimated from the variance of the bootstrap distribution. This method is markedly slower than the other two procedures. Again, <code>iterations</code> regulates the number of bootstrap subsamples to draw. Some model classes (notably &#8220;loess&#8221;) fix <code>vce ="none"</code>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Greene, W.H. 2012. Econometric Analysis, 7th Ed. Boston: Pearson.</p>
<p>Stata manual: <code>margins</code>. Retrieved 2014-12-15 from <a href='http://www.stata.com/manuals13/rmargins.pdf'>http://www.stata.com/manuals13/rmargins.pdf</a>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='marginal_effects.html'>marginal_effects</a></code>, <code><a href='dydx.html'>dydx</a></code>, <code><a href='http://www.rdocumentation.org/packages/prediction/topics/prediction'>prediction</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># basic example using linear model</span>
<span class='fu'>require</span>(<span class='st'>"datasets"</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>cyl</span> * <span class='no'>hp</span> + <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>head</span>(<span class='no'>mtcars</span>))
<span class='fu'>margins</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;     cyl     hp     wt
#&gt;  -11.81 0.6845 0.6995</div><div class='input'>
# obtain unit-specific standard errors
</div><span class='co'># NOT RUN {</span>
  <span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>unit_ses</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># use of 'variables' argument to estimate only some MEs</span>
<span class='fu'>summary</span>(<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='st'>"hp"</span>))</div><div class='output co'>#&gt;  factor    AME     SE       z      p  lower  upper
#&gt;      hp 0.6845 0.0489 13.9991 0.0000 0.5887 0.7804</div><div class='input'>
<span class='co'># use of 'at' argument</span>
<span class='co'>## modifying original data values</span>
<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fl'>150</span>))</div><div class='output co'>#&gt; <span class='message'>Average marginal effects at specified values</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;  at(hp)    cyl     hp     wt
#&gt;     150 -18.53 0.6845 0.6995</div><div class='input'><span class='co'>## AMEs at various data values</span>
<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>95</span>, <span class='fl'>150</span>), <span class='kw'>cyl</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>4</span>,<span class='fl'>6</span>)))</div><div class='output co'>#&gt; <span class='message'>Average marginal effects at specified values</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;  at(hp) at(cyl)     cyl     hp     wt
#&gt;      95       4  -7.266 1.0942 0.6995
#&gt;     150       4 -18.531 1.0942 0.6995
#&gt;      95       6  -7.266 0.6845 0.6995
#&gt;     150       6 -18.531 0.6845 0.6995</div><div class='input'>
<span class='co'># use of 'data' argument to obtain AMEs for a subset of data</span>
<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>[<span class='no'>mtcars</span><span class='kw'>[[</span><span class='st'>"cyl"</span>]] <span class='kw'>==</span> <span class='fl'>4</span>,])</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;     cyl    hp     wt
#&gt;  -4.733 1.094 0.6995</div><div class='input'><span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>[<span class='no'>mtcars</span><span class='kw'>[[</span><span class='st'>"cyl"</span>]] <span class='kw'>==</span> <span class='fl'>6</span>,])</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;     cyl     hp     wt
#&gt;  -12.85 0.6845 0.6995</div><div class='input'>
<span class='co'># return discrete differences for continuous terms</span>
<span class='co'>## passes 'change' through '...' to dydx()</span>
<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>change</span> <span class='kw'>=</span> <span class='st'>"sd"</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>lm(formula = mpg ~ cyl * hp + wt, data = head(mtcars))</span></div><div class='output co'>#&gt;     cyl    hp     wt
#&gt;  -29.87 39.83 0.6481</div><div class='input'>
<span class='co'># summary() method</span>
<span class='fu'>summary</span>(<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>95</span>, <span class='fl'>150</span>))))</div><div class='output co'>#&gt;  factor       hp      AME     SE        z      p    lower    upper
#&gt;     cyl  95.0000  -7.2657 0.5156 -14.0925 0.0000  -8.2762  -6.2552
#&gt;     cyl 150.0000 -18.5314 1.3065 -14.1836 0.0000 -21.0921 -15.9706
#&gt;      hp  95.0000   0.6845 0.0489  13.9989 0.0000   0.5887   0.7804
#&gt;      hp 150.0000   0.6845 0.0489  13.9986 0.0000   0.5887   0.7804
#&gt;      wt  95.0000   0.6995 0.3304   2.1169 0.0343   0.0519   1.3472
#&gt;      wt 150.0000   0.6995 0.3301   2.1193 0.0341   0.0526   1.3464</div><div class='input'><span class='fu'>margins_summary</span>(<span class='no'>x</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>95</span>, <span class='fl'>150</span>)))</div><div class='output co'>#&gt;  factor       hp      AME     SE        z      p    lower    upper
#&gt;     cyl  95.0000  -7.2657 0.5156 -14.0925 0.0000  -8.2762  -6.2552
#&gt;     cyl 150.0000 -18.5314 1.3065 -14.1836 0.0000 -21.0921 -15.9706
#&gt;      hp  95.0000   0.6845 0.0489  13.9989 0.0000   0.5887   0.7804
#&gt;      hp 150.0000   0.6845 0.0489  13.9986 0.0000   0.5887   0.7804
#&gt;      wt  95.0000   0.6995 0.3304   2.1169 0.0343   0.0519   1.3472
#&gt;      wt 150.0000   0.6995 0.3301   2.1193 0.0341   0.0526   1.3464</div><div class='input'><span class='co'>## control row order of summary() output</span>
<span class='fu'>summary</span>(<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>at</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>95</span>, <span class='fl'>150</span>))), <span class='kw'>by_factor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;  factor       hp      AME     SE        z      p    lower    upper
#&gt;     cyl  95.0000  -7.2657 0.5156 -14.0925 0.0000  -8.2762  -6.2552
#&gt;      hp  95.0000   0.6845 0.0489  13.9989 0.0000   0.5887   0.7804
#&gt;      wt  95.0000   0.6995 0.3304   2.1169 0.0343   0.0519   1.3472
#&gt;     cyl 150.0000 -18.5314 1.3065 -14.1836 0.0000 -21.0921 -15.9706
#&gt;      hp 150.0000   0.6845 0.0489  13.9986 0.0000   0.5887   0.7804
#&gt;      wt 150.0000   0.6995 0.3301   2.1193 0.0341   0.0526   1.3464</div><div class='input'>
# alternative 'vce' estimation
</div><span class='co'># NOT RUN {</span>
  <span class='co'># bootstrap</span>
  <span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>vce</span> <span class='kw'>=</span> <span class='st'>"bootstrap"</span>, <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>100L</span>)
  <span class='co'># simulation (ala Clarify/Zelig)</span>
  <span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>vce</span> <span class='kw'>=</span> <span class='st'>"simulation"</span>, <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>100L</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># specifying a custom `vcov` argument</span>
<span class='kw'>if</span> (<span class='fu'>require</span>(<span class='st'>"sandwich"</span>)) {
  <span class='no'>x2</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>Sepal.Width</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>head</span>(<span class='no'>iris</span>))
  <span class='fu'>summary</span>(<span class='fu'>margins</span>(<span class='no'>x2</span>))
  <span class='co'>## heteroskedasticity-consistent covariance matrix</span>
  <span class='fu'>summary</span>(<span class='fu'>margins</span>(<span class='no'>x2</span>, <span class='kw'>vcov</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/sandwich/topics/vcovHC'>vcovHC</a></span>(<span class='no'>x2</span>)))
}</div><div class='output co'>#&gt; <span class='message'>Loading required package: sandwich</span></div><div class='output co'>#&gt;       factor    AME     SE      z      p  lower  upper
#&gt;  Sepal.Width 0.7224 0.3332 2.1681 0.0301 0.0694 1.3754</div><div class='input'>
<span class='co'># generalized linear model</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(<span class='no'>am</span> ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>head</span>(<span class='no'>mtcars</span>), <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>binomial</span>)
<span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"response"</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>glm(formula = am ~ hp, family = binomial, data = head(mtcars))</span></div><div class='output co'>#&gt;       hp
#&gt;  -0.0168</div><div class='input'><span class='fu'>margins</span>(<span class='no'>x</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"link"</span>)</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>glm(formula = am ~ hp, family = binomial, data = head(mtcars))</span></div><div class='output co'>#&gt;        hp
#&gt;  -0.08928</div><div class='input'>
<span class='co'># multi-category outcome</span>
<span class='kw'>if</span> (<span class='fu'>requireNamespace</span>(<span class='st'>"nnet"</span>)) {
  <span class='fu'>data</span>(<span class='st'>"iris3"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"datasets"</span>)
  <span class='no'>ird</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='fu'>rbind</span>(<span class='no'>iris3</span>[,,<span class='fl'>1</span>], <span class='no'>iris3</span>[,,<span class='fl'>2</span>], <span class='no'>iris3</span>[,,<span class='fl'>3</span>]),
                    <span class='kw'>species</span> <span class='kw'>=</span> <span class='fu'>factor</span>(<span class='fu'>c</span>(<span class='fu'>rep</span>(<span class='st'>"s"</span>,<span class='fl'>50</span>), <span class='fu'>rep</span>(<span class='st'>"c"</span>, <span class='fl'>50</span>), <span class='fu'>rep</span>(<span class='st'>"v"</span>, <span class='fl'>50</span>))))
  <span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>nnet</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/nnet/topics/nnet'>nnet</a></span>(<span class='no'>species</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ird</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>rang</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
                  <span class='kw'>decay</span> <span class='kw'>=</span> <span class='fl'>5e-4</span>, <span class='kw'>maxit</span> <span class='kw'>=</span> <span class='fl'>200</span>, <span class='kw'>trace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='fu'>margins</span>(<span class='no'>m</span>) <span class='co'># default</span>
  <span class='fu'>margins</span>(<span class='no'>m</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>"v"</span>) <span class='co'># explicit category</span>
}</div><div class='output co'>#&gt; <span class='message'>Average marginal effects</span></div><div class='output co'>#&gt; <span class='message'>nnet.formula(formula = species ~ ., data = ird, size = 2, rang = 0.1,     decay = 5e-04, maxit = 200, trace = FALSE)</span></div><div class='output co'>#&gt;  Sepal.L. Sepal.W. Petal.L. Petal.W.
#&gt;  -0.02979 -0.08066   0.1131   0.2193</div><div class='input'>
<span class='co'># using margins_summary() for concise grouped operations</span>
<span class='no'>list_data</span> <span class='kw'>&lt;-</span> <span class='fu'>split</span>(<span class='no'>mtcars</span>, <span class='no'>mtcars</span>$<span class='no'>gear</span>)
<span class='no'>list_mod</span> <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='no'>list_data</span>, <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>lm</span>(<span class='no'>mpg</span> ~ <span class='no'>cyl</span> + <span class='no'>wt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>x</span>))
<span class='fu'>mapply</span>(<span class='no'>margins_summary</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>list_mod</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>list_data</span>, <span class='kw'>SIMPLIFY</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; $`3`
#&gt;  factor     AME     SE       z      p   lower   upper
#&gt;     cyl -0.8380 0.5773 -1.4515 0.1466 -1.9695  0.2936
#&gt;      wt -2.4727 0.8228 -3.0051 0.0027 -4.0855 -0.8600
#&gt; 
#&gt; $`4`
#&gt;  factor     AME     SE       z      p   lower   upper
#&gt;     cyl -1.6405 1.0927 -1.5013 0.1333 -3.7822  0.5012
#&gt;      wt -5.4414 1.7008 -3.1994 0.0014 -8.7749 -2.1080
#&gt; 
#&gt; $`5`
#&gt;  factor     AME     SE       z      p    lower   upper
#&gt;     cyl -0.8501 0.8180 -1.0392 0.2987  -2.4534  0.7532
#&gt;      wt -6.0898 1.9978 -3.0482 0.0023 -10.0055 -2.1741
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Thomas J. Leeper

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thomas J. Leeper.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

